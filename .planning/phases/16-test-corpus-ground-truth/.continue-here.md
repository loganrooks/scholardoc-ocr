---
phase: 16-test-corpus-ground-truth
task: 1
total_tasks: 2
status: in_progress
last_updated: 2026-02-20T04:25:39.294Z
---

<current_state>
Executing Phase 16 Plan 03 (Ground Truth Creation). Task 1 is a checkpoint:human-action
for creating ground truth transcriptions via Opus vision. Partially complete — 19 of 48
pages transcribed before hitting content filter issues in subagents and a design question
about GT format.

**CRITICAL DESIGN QUESTION:** Before resuming transcription, we need to investigate the
GT format/schema being designed in the `scholardoc` project (sibling project at
`/Users/rookslog/Development/scholardoc/`) and align our ground truth format with it.
The user wants a richer format (possibly markdown) that preserves ALL page information
(page numbers, headers, footers, etc.) for cross-project reuse, rather than the plain
text format originally planned.
</current_state>

<completed_work>

## Wave 1: Plan 16-01 (Corpus Infrastructure) — COMPLETE
- Task 1: Created tests/corpus/ directory structure, .gitignore, corpus.json manifest
- Task 2: Created scripts/corpus/render_pages.py and build_coverage_matrix.py
- Commits: 7c51661, 6c84ac3, a931141

## Wave 2: Plan 16-02 (Baselines & Page Selection) — COMPLETE
- Task 1 (checkpoint): PDFs copied (not symlinked) to tests/corpus/pdfs/
  - Source: /Users/rookslog/Projects/PhilosophyFilmClub/EnvoisFilm/
  - Simondon from library/sources/gilbert-simondon/
  - Grammatology & Dissemination from intake/incoming/
  - Margins from library/sources/jacques-derrida/margins-of-philosophy/
  - Installed psutil (was missing, caused pipeline error)
  - Updated Simondon language from ["fr"] to ["en"] and title to English translation
- All 4 diagnostic baselines run successfully:
  - simondon-technical-objects: 267 pages, 88.6% quality, mixed engine
  - derrida-grammatology: 452 pages, 89.4% quality, mixed engine
  - derrida-margins: 359 pages, 89.8% quality, mixed engine
  - derrida-dissemination: 400 pages, 86.1% quality, mixed engine
  - Note: Recurring IndexError in batch.py:470 during Surya (3/4 docs), pipeline recovered each time
- Task 2: Coverage analysis run, 48 pages selected (28 difficult + 20 regression), PNGs rendered, manifest updated
- Commits: 14aee56, 87f8cc7

## Wave 3: Plan 16-03 (Ground Truth Creation) — IN PROGRESS
- Task 1 (checkpoint): Ground truth transcription — PARTIALLY COMPLETE
  - simondon-technical-objects: 11/11 pages DONE (all by subagent before content filter)
  - derrida-grammatology: 8/13 pages done (4 by subagent, 4 by main context)
    - Done: page_000, page_002, page_003, page_008, page_100, page_185, page_194, page_243
    - Remaining: page_158, page_286, page_334, page_446, page_451
  - derrida-margins: 0/13 pages done
    - Needed: 0, 2, 4, 29, 94, 102, 149, 182, 191, 203, 235, 270, 356
  - derrida-dissemination: 0/11 pages done
    - Needed: 0, 1, 24, 93, 104, 179, 187, 200, 206, 299, 399
- Task 2: Finalize manifest with ground_truth_pages mappings — NOT STARTED
</completed_work>

<remaining_work>

## BEFORE RESUMING TRANSCRIPTION
1. **Investigate scholardoc GT schema**: Look in `/Users/rookslog/Development/scholardoc/` for:
   - Ground truth format proposals (spikes/06*, ground_truth/ directory)
   - Any recent design discussions about GT schema (check git log, branches)
   - The "MadnessAndTheCogito" reference — may be in commit messages, issues, or docs
   - Key files found so far:
     - `scholardoc/ground_truth/ocr_quality/unified_ground_truth.json` (error-pair based)
     - `scholardoc/spikes/06c_real_ground_truth.py` (GroundTruthPair dataclass)
     - `scholardoc/spikes/FINDINGS.md` (spike 06b_ground_truth overview)
   - The user wants a RICHER format that preserves all information (page numbers, headers,
     footers, etc.) and uses markdown, not plain text

2. **Design decision**: Determine the GT format before continuing transcription:
   - Current format: plain .txt files with footnotes separated by "---"
   - User wants: markdown format preserving all page information for cross-project reuse
   - Need to decide: What metadata goes in frontmatter? What structural elements to mark?
   - 19 existing .txt files may need conversion to the new format

## AFTER FORMAT DECISION
3. **Complete remaining transcriptions** (29 pages):
   - derrida-grammatology: 5 remaining pages
   - derrida-margins: 13 pages
   - derrida-dissemination: 11 pages
   - Content filter workaround: transcribe in main context, paragraph-at-a-time with append
   - Or: subagent with smaller batches (single document at a time)

4. **Plan 16-03 Task 2**: Finalize manifest with ground_truth_pages mappings
   - Scan ground_truth directories, build mappings in corpus.json
   - Validate UTF-8, NFC normalization
   - Cross-reference with page_selection.json
   - Create 16-03-SUMMARY.md
</remaining_work>

<decisions_made>

- PDFs copied instead of symlinked (user preference — symlinks break after processing)
- Simondon language updated from ["fr"] to ["en"] (PDF is English Malaspina translation)
- Simondon title updated to "On the Mode of Existence of Technical Objects"
- psutil installed via `--break-system-packages` for the Python 3.12 environment used by ocr CLI
- Coverage matrix script was auto-fixed: added _sample_cross_document() to cap gray_zone pages
- 48 pages selected: 28 difficult + 20 regression
- Content filter blocks subagent transcription of copyrighted Derrida pages — need paragraph-at-a-time or main-context approach
- **PENDING**: GT format decision — plain text vs. markdown with metadata
</decisions_made>

<blockers>

- Content filter blocks bulk transcription of copyrighted philosophy text in subagents
  - Workaround: transcribe in main context, paragraph-at-a-time
  - Or: very small batches in subagents (may still trigger)
- GT format needs design alignment with scholardoc sibling project before continuing
- Recurring batch.py:470 IndexError during Surya (non-blocking, pipeline recovers)
</blockers>

<context>
Phase 16 builds the evaluation corpus that Phases 17-19 depend on. The corpus has 4
philosophy PDFs (1,478 total pages), diagnostic baselines captured, and 48 pages selected
for ground truth. The infrastructure (manifest, scripts, baselines) is solid.

The GT transcription is the remaining bottleneck. The user paused to reconsider the GT
format — they want something richer than plain text that can be reused across projects
(scholardoc-ocr and the scholardoc parent project). Markdown with YAML frontmatter is
the likely direction.

The user specifically mentioned "MadnessAndTheCogito" as a reference for GT design —
this might be a chapter/essay reference (Derrida's "Cogito and the History of Madness"
from Writing and Difference) used as a test case, or a project name. It wasn't found in
filesystem searches but may be in git history or conversation logs.
</context>

<next_action>
1. Search scholardoc project thoroughly for GT format proposals:
   - `git log --all --oneline` for recent GT-related commits
   - Read spike 06b ground truth spike fully
   - Check for any .md or .yaml format proposals
   - Look at ground_truth/footnotes/ directory
   - Search for "markdown" or "format" in ground truth files
2. Present GT format options to user
3. Convert existing 19 .txt files to chosen format
4. Continue transcription of remaining 29 pages in new format
</next_action>
