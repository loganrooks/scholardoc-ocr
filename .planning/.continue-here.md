---
phase: between-milestones
status: planning_v3
last_updated: 2026-02-05
---

<current_state>
Between milestones. v2.1 Performance shipped. v3.0 not yet started.

This session explored MCP server functionality and identified quality diagnostics gap that should inform v3.0 requirements.
</current_state>

<completed_work>

- Tested MCP server end-to-end (works correctly)
- Updated CLAUDE.md with accurate 20-module architecture (was outdated, only listed 4 modules)
- Updated auto memory with correct architecture
- Verified philosophical term handling in quality system:
  - 98.2% of VALID_TERMS (160/163) are in dictionary wordlist
  - Only 3 missing: befindlich, gegenwärtigen, gewärtigen
- Identified diagnostics gap in quality system
</completed_work>

<remaining_work>

1. **Immediate (pre-v3.0):**
   - Change default quality threshold from 0.85 to 0.90 (user requested)
   - Commit CLAUDE.md changes

2. **v3.0 Milestone - Quality Diagnostics:**
   - Extend PageResult with signal breakdown (garbled, dictionary, confidence scores)
   - Export sample_issues and sample_context to JSON metadata
   - Add --diagnostics CLI flag for verbose output
   - Create diagnostic report summarizing flagged terms across batch
   - Add review mode for human verification of flagged samples
   - Track false positive candidates
</remaining_work>

<decisions_made>

- Quality threshold should be 0.90 (more conservative, send more to Surya)
- Measuring quality after post-processing NOT needed (post-processing fixes formatting, not garbled text)
- Diagnostics gap is significant - can't currently understand WHY pages are flagged
</decisions_made>

<blockers>
None. Ready to proceed.
</blockers>

<context>
User wants better observability into quality decisions. Current JSON output only has overall score, not the signal breakdown or sample issues. This makes it impossible to:
- Understand why a page was flagged
- Identify false positives (valid terms wrongly flagged)
- Tune thresholds based on real-world data

The QualityResult dataclass HAS all this info, it's just not propagated to PageResult/FileResult/JSON output.

MCP server is working well - tested with stdio client, all 4 tools functional.
</context>

<next_action>
1. Make the threshold change (0.85 → 0.90 in PipelineConfig)
2. Commit CLAUDE.md and threshold change
3. Run /gsd:new-milestone to start v3.0 with diagnostics as a key theme
</next_action>
