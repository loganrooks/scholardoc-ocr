# Requirements Archive: v1.0 MVP

**Archived:** 2026-02-02
**Status:** SHIPPED

This is the archived requirements specification for v1.0.
For current requirements, see `.planning/REQUIREMENTS.md` (created for next milestone).

---

## v1 Requirements

### Critical Bug Fixes

- [x] **BUG-01**: Surya OCR results written back to output files — validated in Phase 4
- [x] **BUG-02**: Surya batch output correctly extracted from rendered markdown — validated in Phase 4

### Library API

- [x] **API-01**: Clean Python library API that can be called without CLI — validated in Phase 1
- [x] **API-02**: Pipeline returns structured results (per-file, per-page quality scores and status) — validated in Phase 1
- [x] **API-03**: Progress reporting via callback protocol (not coupled to Rich) — validated in Phase 1
- [x] **API-04**: No sys.exit() in library code; proper exception hierarchy — validated in Phase 1

### Architecture

- [x] **ARCH-01**: Pipeline orchestration separated from UI presentation — validated in Phase 4
- [x] **ARCH-02**: Per-file Surya batching with shared model — validated in Phase 4
- [x] **ARCH-03**: Resource-safe PDF handling (context managers for all fitz operations) — validated in Phase 1
- [x] **ARCH-04**: Coordinate CPU usage (pool workers x jobs_per_file <= total cores) — validated in Phase 4
- [x] **ARCH-05**: Surya models loaded once per pipeline run, shared across files — validated in Phase 3

### Quality Analysis

- [x] **QUAL-01**: Tesseract confidence scores integrated into quality scoring — validated in Phase 2
- [x] **QUAL-02**: Composite quality score (confidence + garbled regex + dictionary hits) — validated in Phase 2
- [x] **QUAL-03**: Per-page quality breakdown available in results — validated in Phase 2

### Language Support

- [x] **LANG-01**: German language support added (Tesseract: deu, Surya: de) — validated in Phase 2
- [x] **LANG-02**: Academic term whitelists updated for German philosophical vocabulary — validated in Phase 2

### CLI

- [x] **CLI-01**: CLI wraps library API (thin presentation layer) — validated in Phase 5
- [x] **CLI-02**: Existing CLI interface preserved — validated in Phase 5
- [x] **CLI-03**: Recursive mode file path handling fixed — validated in Phase 5

### MCP Integration

- [x] **MCP-01**: OCR pipeline callable as MCP tool from Claude Desktop — validated in Phase 6
- [x] **MCP-02**: Returns structured results with summary — validated in Phase 6+7
- [x] **MCP-03**: Optional extract_text parameter writes .txt file — validated in Phase 6+7
- [x] **MCP-04**: Optional page_range parameter — validated in Phase 6
- [x] **MCP-05**: Optional output_name parameter — validated in Phase 6+7

### Code Cleanup

- [x] **CLEAN-01**: Dead code removed — validated in Phase 1
- [x] **CLEAN-02**: Invalid type annotations fixed — validated in Phase 1

### Testing

- [x] **TEST-01**: Unit tests for quality analysis — validated in Phase 2
- [x] **TEST-02**: Unit tests for PDF processor operations — validated in Phase 1+3
- [x] **TEST-03**: Integration tests for pipeline orchestration — validated in Phase 4
- [x] **TEST-04**: Test verifying Surya output in final file — validated in Phase 4

## Traceability

| Requirement | Phase | Status |
|-------------|-------|--------|
| BUG-01 | Phase 4 | Complete |
| BUG-02 | Phase 4 | Complete |
| API-01 | Phase 1 | Complete |
| API-02 | Phase 1 | Complete |
| API-03 | Phase 1 | Complete |
| API-04 | Phase 1 | Complete |
| ARCH-01 | Phase 4 | Complete |
| ARCH-02 | Phase 4 | Complete |
| ARCH-03 | Phase 1 | Complete |
| ARCH-04 | Phase 4 | Complete |
| ARCH-05 | Phase 3 | Complete |
| QUAL-01 | Phase 2 | Complete |
| QUAL-02 | Phase 2 | Complete |
| QUAL-03 | Phase 2 | Complete |
| LANG-01 | Phase 2 | Complete |
| LANG-02 | Phase 2 | Complete |
| CLI-01 | Phase 5 | Complete |
| CLI-02 | Phase 5 | Complete |
| CLI-03 | Phase 5 | Complete |
| MCP-01 | Phase 6 | Complete |
| MCP-02 | Phase 6+7 | Complete |
| MCP-03 | Phase 6+7 | Complete |
| MCP-04 | Phase 6 | Complete |
| MCP-05 | Phase 6+7 | Complete |
| CLEAN-01 | Phase 1 | Complete |
| CLEAN-02 | Phase 1 | Complete |
| TEST-01 | Phase 2 | Complete |
| TEST-02 | Phase 1+3 | Complete |
| TEST-03 | Phase 4 | Complete |
| TEST-04 | Phase 4 | Complete |

**Coverage:** 30/30 requirements shipped

---

## Milestone Summary

**Shipped:** 30 of 30 v1 requirements
**Adjusted:** MCP-02, MCP-03, MCP-05 required additional Phase 7 to fully satisfy (output_path missing from FileResult)
**Dropped:** None

---
*Archived: 2026-02-02 as part of v1.0 milestone completion*
